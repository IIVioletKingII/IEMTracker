var ye=Object.defineProperty;var he=(e,n,t)=>n in e?ye(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var r=(e,n,t)=>he(e,typeof n!="symbol"?n+"":n,t);import{s as xe,r as Ee,n as Y,g as Se,E as Pe,a as we,b as Ie,c as ve,t as Ce,f as ge,p as be,N as Re,A as Ae,d as fe,e as ze,h as De,i as Fe,S as _e,D as ke,F as $e,j as Ne,k as He,l as Ue,m as Oe,o as Le,q as Te,u as Me,v as Ge,w as qe,x as je,y as Be,z as Ve,B as Je,C as Ke,G as We,H as Xe,I as Ye,J as Qe,K as Ze,L as et,M as tt,O as nt,P as st,Q as ot,R as rt,T as it,U as at,V as dt,W as ct,_ as c,X as Q,Y as pt,Z as lt,$ as ut,a0 as mt,a1 as u,a2 as Z,a3 as b,a4 as yt,a5 as ht,a6 as ee,a7 as te,a8 as ne}from"./index-CFEKeesR.js";class xt{async sign(n,t,s){return n}}const A="***SensitiveInformation***",Et=e=>{if(e==null)return;let n;if(typeof e=="number")n=e;else if(typeof e=="string")n=xe(e);else if(typeof e=="object"&&e.tag===1)n=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(n)||n===1/0||n===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(n*1e3))},St=async(e,n,t)=>({operation:Se(n).operation,region:await Y(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Pt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function g(e){return{schemeId:"smithy.api#noAuth"}}const wt=e=>{const n=[];switch(e.operation){case"GetCredentialsForIdentity":{n.push(g());break}case"GetId":{n.push(g());break}case"GetOpenIdToken":{n.push(g());break}case"UnlinkIdentity":{n.push(g());break}default:n.push(Pt(e))}return n},It=e=>{const n=Ee(e);return Object.assign(n,{authSchemePreference:Y(e.authSchemePreference??[])})},vt=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),se={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Ct="3.803.0",gt={version:Ct},oe="required",a="fn",d="argv",E="ref",M=!0,G="isSet",v="booleanEquals",x="error",m="endpoint",y="tree",f="PartitionResult",z="getAttr",w="stringEquals",q={[oe]:!1,type:"String"},j={[oe]:!0,default:!1,type:"Boolean"},B={[E]:"Endpoint"},re={[a]:v,[d]:[{[E]:"UseFIPS"},!0]},ie={[a]:v,[d]:[{[E]:"UseDualStack"},!0]},i={},I={[E]:"Region"},V={[a]:z,[d]:[{[E]:f},"supportsFIPS"]},ae={[E]:f},J={[a]:v,[d]:[!0,{[a]:z,[d]:[ae,"supportsDualStack"]}]},K=[re],W=[ie],X=[I],bt={parameters:{Region:q,UseDualStack:j,UseFIPS:j,Endpoint:q},rules:[{conditions:[{[a]:G,[d]:[B]}],rules:[{conditions:K,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:x},{conditions:W,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:x},{endpoint:{url:B,properties:i,headers:i},type:m}],type:y},{conditions:[{[a]:G,[d]:X}],rules:[{conditions:[{[a]:"aws.partition",[d]:X,assign:f}],rules:[{conditions:[re,ie],rules:[{conditions:[{[a]:v,[d]:[M,V]},J],rules:[{conditions:[{[a]:w,[d]:[I,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:i,headers:i},type:m},{conditions:[{[a]:w,[d]:[I,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:i,headers:i},type:m},{conditions:[{[a]:w,[d]:[I,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:i,headers:i},type:m},{conditions:[{[a]:w,[d]:[I,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:i,headers:i},type:m},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:i,headers:i},type:m}],type:y},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:x}],type:y},{conditions:K,rules:[{conditions:[{[a]:v,[d]:[V,M]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:i,headers:i},type:m}],type:y},{error:"FIPS is enabled but this partition does not support FIPS",type:x}],type:y},{conditions:W,rules:[{conditions:[J],rules:[{conditions:[{[a]:w,[d]:["aws",{[a]:z,[d]:[ae,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:i,headers:i},type:m},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:i,headers:i},type:m}],type:y},{error:"DualStack is enabled but this partition does not support DualStack",type:x}],type:y},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:i,headers:i},type:m}],type:y}],type:y},{error:"Invalid Configuration: Missing Region",type:x}]},Rt=bt,At=new Pe({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),ft=(e,n={})=>At.get(e,()=>we(Rt,{endpointParams:e,logger:n.logger}));ve.aws=Ie;const zt=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??ze,base64Encoder:(e==null?void 0:e.base64Encoder)??fe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??ft,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??wt,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new Ae},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new xt}],logger:(e==null?void 0:e.logger)??new Re,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??be,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ge,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Ce}),Dt=e=>{const n=De(e),t=()=>n().then(Me),s=zt(e);return{...s,...e,runtime:"browser",defaultsMode:n,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Oe,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Ue({serviceId:s.serviceId,clientVersion:gt.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??He,region:(e==null?void 0:e.region)??Ne("Region is missing"),requestHandler:$e.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||ke),sha256:(e==null?void 0:e.sha256)??_e,streamCollector:(e==null?void 0:e.streamCollector)??Fe,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Te)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Le))}},Ft=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(o){const h=n.findIndex(S=>S.schemeId===o.schemeId);h===-1?n.push(o):n.splice(h,1,o)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){s=o},credentials(){return s}}},_t=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),kt=(e,n)=>{const t=Object.assign(Ge(e),qe(e),je(e),Ft(e));return n.forEach(s=>s.configure(t)),Object.assign(e,Be(t),Ve(t),Je(t),_t(t))};class on extends Ke{constructor(...[t]){const s=Dt(t||{});super(s);r(this,"config");this.initConfig=s;const o=vt(s),h=We(o),S=Xe(h),R=Ye(S),P=Ze(R),C=Qe(P),le=It(C),ue=kt(le,(t==null?void 0:t.extensions)||[]);this.config=ue,this.middlewareStack.use(et(this.config)),this.middlewareStack.use(tt(this.config)),this.middlewareStack.use(nt(this.config)),this.middlewareStack.use(st(this.config)),this.middlewareStack.use(ot(this.config)),this.middlewareStack.use(rt(this.config)),this.middlewareStack.use(it(this.config,{httpAuthSchemeParametersProvider:St,identityProviderConfigProvider:async me=>new at({"aws.auth#sigv4":me.credentials})})),this.middlewareStack.use(dt(this.config))}destroy(){super.destroy()}}class p extends ct{constructor(n){super(n),Object.setPrototypeOf(this,p.prototype)}}class D extends p{constructor(t){super({name:"InternalErrorException",$fault:"server",...t});r(this,"name","InternalErrorException");r(this,"$fault","server");Object.setPrototypeOf(this,D.prototype)}}class F extends p{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t});r(this,"name","InvalidParameterException");r(this,"$fault","client");Object.setPrototypeOf(this,F.prototype)}}class _ extends p{constructor(t){super({name:"LimitExceededException",$fault:"client",...t});r(this,"name","LimitExceededException");r(this,"$fault","client");Object.setPrototypeOf(this,_.prototype)}}class k extends p{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t});r(this,"name","NotAuthorizedException");r(this,"$fault","client");Object.setPrototypeOf(this,k.prototype)}}class $ extends p{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t});r(this,"name","ResourceConflictException");r(this,"$fault","client");Object.setPrototypeOf(this,$.prototype)}}class N extends p{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});r(this,"name","TooManyRequestsException");r(this,"$fault","client");Object.setPrototypeOf(this,N.prototype)}}class H extends p{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});r(this,"name","ResourceNotFoundException");r(this,"$fault","client");Object.setPrototypeOf(this,H.prototype)}}class U extends p{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t});r(this,"name","ExternalServiceException");r(this,"$fault","client");Object.setPrototypeOf(this,U.prototype)}}class O extends p{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t});r(this,"name","InvalidIdentityPoolConfigurationException");r(this,"$fault","client");Object.setPrototypeOf(this,O.prototype)}}class L extends p{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t});r(this,"name","DeveloperUserAlreadyRegisteredException");r(this,"$fault","client");Object.setPrototypeOf(this,L.prototype)}}class T extends p{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t});r(this,"name","ConcurrentModificationException");r(this,"$fault","client");Object.setPrototypeOf(this,T.prototype)}}const $t=e=>({...e,...e.Logins&&{Logins:A}}),Nt=e=>({...e,...e.SecretKey&&{SecretKey:A}}),Ht=e=>({...e,...e.Credentials&&{Credentials:Nt(e.Credentials)}}),Ut=e=>({...e,...e.Logins&&{Logins:A}}),Ot=async(e,n)=>{const t=pe("GetCredentialsForIdentity");let s;return s=JSON.stringify(c(e)),ce(n,t,"/",void 0,s)},Lt=async(e,n)=>{const t=pe("GetId");let s;return s=JSON.stringify(c(e)),ce(n,t,"/",void 0,s)},Tt=async(e,n)=>{if(e.statusCode>=300)return de(e,n);const t=await Q(e.body,n);let s={};return s=en(t),{$metadata:l(e),...s}},Mt=async(e,n)=>{if(e.statusCode>=300)return de(e,n);const t=await Q(e.body,n);let s={};return s=c(t),{$metadata:l(e),...s}},de=async(e,n)=>{const t={...e,body:await lt(e.body,n)},s=ut(e,t.body);switch(s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Bt(t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Jt(t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Kt(t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Wt(t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Xt(t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await Qt(t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Yt(t);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await jt(t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Vt(t);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await qt(t);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Gt(t);default:const o=t.body;return tn({output:e,parsedBody:o,errorCode:s})}},Gt=async(e,n)=>{const t=e.body,s=c(t),o=new T({$metadata:l(e),...s});return u(o,t)},qt=async(e,n)=>{const t=e.body,s=c(t),o=new L({$metadata:l(e),...s});return u(o,t)},jt=async(e,n)=>{const t=e.body,s=c(t),o=new U({$metadata:l(e),...s});return u(o,t)},Bt=async(e,n)=>{const t=e.body,s=c(t),o=new D({$metadata:l(e),...s});return u(o,t)},Vt=async(e,n)=>{const t=e.body,s=c(t),o=new O({$metadata:l(e),...s});return u(o,t)},Jt=async(e,n)=>{const t=e.body,s=c(t),o=new F({$metadata:l(e),...s});return u(o,t)},Kt=async(e,n)=>{const t=e.body,s=c(t),o=new _({$metadata:l(e),...s});return u(o,t)},Wt=async(e,n)=>{const t=e.body,s=c(t),o=new k({$metadata:l(e),...s});return u(o,t)},Xt=async(e,n)=>{const t=e.body,s=c(t),o=new $({$metadata:l(e),...s});return u(o,t)},Yt=async(e,n)=>{const t=e.body,s=c(t),o=new H({$metadata:l(e),...s});return u(o,t)},Qt=async(e,n)=>{const t=e.body,s=c(t),o=new N({$metadata:l(e),...s});return u(o,t)},Zt=(e,n)=>Z(e,{AccessKeyId:b,Expiration:t=>yt(Et(ht(t))),SecretKey:b,SessionToken:b}),en=(e,n)=>Z(e,{Credentials:t=>Zt(t),IdentityId:b}),l=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),tn=mt(p),ce=async(e,n,t,s,o)=>{const{hostname:h,protocol:S="https",port:R,path:P}=await e.endpoint(),C={protocol:S,hostname:h,port:R,method:"POST",path:P.endsWith("/")?P.slice(0,-1)+t:P+t,headers:n};return o!==void 0&&(C.body=o),new pt(C)};function pe(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class rn extends ee.classBuilder().ep(se).m(function(n,t,s,o){return[te(s,this.serialize,this.deserialize),ne(s,n.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f($t,Ht).ser(Ot).de(Tt).build(){}class an extends ee.classBuilder().ep(se).m(function(n,t,s,o){return[te(s,this.serialize,this.deserialize),ne(s,n.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Ut,void 0).ser(Lt).de(Mt).build(){}export{on as CognitoIdentityClient,rn as GetCredentialsForIdentityCommand,an as GetIdCommand};
